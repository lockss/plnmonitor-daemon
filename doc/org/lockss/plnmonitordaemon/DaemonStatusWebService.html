<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_51) on Fri May 03 13:57:51 CEST 2019 -->
<title>DaemonStatusWebService</title>
<meta name="date" content="2019-05-03">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DaemonStatusWebService";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../org/lockss/plnmonitordaemon/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DaemonStatusWebService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../org/lockss/plnmonitordaemon/FormBasedAuthentification.html" title="class in org.lockss.plnmonitordaemon"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/lockss/plnmonitordaemon/DaemonStatusWebService.html" target="_top">Frames</a></li>
<li><a href="DaemonStatusWebService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.lockss.plnmonitordaemon</div>
<h2 title="Class DaemonStatusWebService" class="title">Class DaemonStatusWebService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.lockss.plnmonitordaemon.DaemonStatusWebService</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">DaemonStatusWebService</span>
extends java.lang.Object</pre>
<div class="block">The Class DaemonStatusWebService.
 
 Retrieves all available status info from all LOCKSS boxes in the network (found via initialV3PeerList in LOCKSS lockss.xml network config file 
 via the DaemonStatusWebService with debug user access to LOCKSS web user interface 
 
 Stores all info in a PostgreSQL DB. The db is configured with trigger functions to automatically keep all history after an upsert.
 <p>
 <h2>Known issues:</h2> 
 <h3>1. SOAP access to LOCKSS boxes in SSL mode. </h3>
 While the Daemon Status web service is directly accessible with basic authentication, when SSL is switched on, the authentication is done with a form-based login webpage.
 Tried to pass the username and password directly in the header of the WSDL request but it didnâ€™t work. 
 Also tried implementing an Apache HTTPclient to initiate and maintain the authenticated connection for the web service requests but, still, without success.
 Given that the access control mechanism will be considerably improved in LAAWS (Shibboleth), more useful to focus on the other plnmonitor features

 <h3>2. Dumb usage of the database</h3>
 It would be much more efficient to store only status information transitions and not every status value</div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>0.7</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Anthony Leroy</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/lockss/plnmonitordaemon/DaemonStatusWebService.html#DaemonStatusWebService--">DaemonStatusWebService</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>java.util.HashMap&lt;java.lang.Integer,java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/lockss/plnmonitordaemon/DaemonStatusWebService.html#getPLNConfigurationFiles--">getPLNConfigurationFiles</a></span>()</code>
<div class="block">Gets URLs of the lockss.xml configuration file for each LOCKSS network available in the database</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/lockss/plnmonitordaemon/DaemonStatusWebService.html#loadDaemonStatus-java.lang.Integer-java.lang.String-">loadDaemonStatus</a></span>(java.lang.Integer&nbsp;plnID,
                java.lang.String&nbsp;boxIpAddress)</code>
<div class="block">Load daemon status.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.util.List&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/lockss/plnmonitordaemon/DaemonStatusWebService.html#loadPLNConfiguration-java.lang.Integer-java.lang.String-">loadPLNConfiguration</a></span>(java.lang.Integer&nbsp;plnID,
                    java.lang.String&nbsp;configUrl)</code>
<div class="block">Load PLN configuration

 Return IP addresses of all the boxes in the LOCKSS network based on 
 the lockss.xml configuration file initialV3PeerList section</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DaemonStatusWebService--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DaemonStatusWebService</h4>
<pre>public&nbsp;DaemonStatusWebService()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getPLNConfigurationFiles--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPLNConfigurationFiles</h4>
<pre>public&nbsp;java.util.HashMap&lt;java.lang.Integer,java.lang.String&gt;&nbsp;getPLNConfigurationFiles()
                                                                               throws java.sql.SQLException</pre>
<div class="block">Gets URLs of the lockss.xml configuration file for each LOCKSS network available in the database</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>returns url for lockss.xml config file for each LOCKSS network in a List (LOCKSS network ID, lockss.xml URL)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - the SQL exception</dd>
</dl>
</li>
</ul>
<a name="loadPLNConfiguration-java.lang.Integer-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadPLNConfiguration</h4>
<pre>public&nbsp;java.util.List&lt;java.lang.String&gt;&nbsp;loadPLNConfiguration(java.lang.Integer&nbsp;plnID,
                                                             java.lang.String&nbsp;configUrl)</pre>
<div class="block">Load PLN configuration

 Return IP addresses of all the boxes in the LOCKSS network based on 
 the lockss.xml configuration file initialV3PeerList section</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>plnID</code> - the pln ID in the database</dd>
<dd><code>configUrl</code> - the URL of the lockss.xml file for the given LOCKSS network</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>plnMembers : the list of box IP addresses in the network</dd>
</dl>
</li>
</ul>
<a name="loadDaemonStatus-java.lang.Integer-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>loadDaemonStatus</h4>
<pre>public&nbsp;void&nbsp;loadDaemonStatus(java.lang.Integer&nbsp;plnID,
                             java.lang.String&nbsp;boxIpAddress)
                      throws java.sql.SQLException</pre>
<div class="block">Load daemon status.

 Get all available status info from a LOCKSS box identified by its IP address boxIpAddress:
 - Archival Units info in the box
 - Repository Space from the box
 - Peers of the box
 - Repository info from the box</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>plnID</code> - the pln ID in the database</dd>
<dd><code>boxIpAddress</code> - the box ip address</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - the SQL exception</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../org/lockss/plnmonitordaemon/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DaemonStatusWebService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../org/lockss/plnmonitordaemon/FormBasedAuthentification.html" title="class in org.lockss.plnmonitordaemon"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/lockss/plnmonitordaemon/DaemonStatusWebService.html" target="_top">Frames</a></li>
<li><a href="DaemonStatusWebService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
